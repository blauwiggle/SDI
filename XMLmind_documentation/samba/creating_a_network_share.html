<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>1.&nbsp;Creating a Network Share</title><link rel="stylesheet" type="text/css" href="html.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Chapter&nbsp;1.&nbsp;Network file systems served by Samba"><link rel="up" href="index.html" title="Chapter&nbsp;1.&nbsp;Network file systems served by Samba"><link rel="prev" href="index.html" title="Chapter&nbsp;1.&nbsp;Network file systems served by Samba"><link rel="next" href="testing_share_definitions.html" title="2.&nbsp;Testing share definitions using smbclient"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.&nbsp;Creating a Network Share</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="index.html"><img src="images/prev.svg" alt="Prev"></a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="testing_share_definitions.html"><img src="images/next.svg" alt="Next"></a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="creating_a_network_share"></a>1.&nbsp;Creating a Network Share</h2></div></div></div><p>First we needed to install samba itself. This was accomplished by the following commands:</p><pre class="screen"><code class="code">apt-get update</code>
apt-get install samba</pre><p>Then we had to set a password for our user in Samba with the following command:</p><pre class="screen"><code class="code">smbpasswd </code>-a &lt;user_name&gt;</pre><p>In our case we used the user root:</p><pre class="screen">smbpasswd -a root</pre><p>After running the command a prompt showed up which let us enter the desired password which in our case is sdi8bsamba because we set it up on our b machine.</p><p>The next step was creating a shared directory. We decided to share the directory /usr/share/samba.</p><p>We created a backup config of the original config file in order to be able to restore it in case anything goes wrong:</p><pre class="screen">cp /etc/samba/smb.conf /root/</pre><p>Then we edited the config file and added the following code:</p><pre class="screen">nano /etc/samba/smb.conf</pre><pre class="screen">[sambashare]
path = /root/sambashare
valid users = root
read only = no</pre><p>A restart of the service is required to make changes take effect:</p><pre class="screen">service smbd restart</pre><p>Then we checked the validity of our config syntax with the following command:</p><pre class="screen">testparm</pre><p>Output:</p><pre class="screen">Load smb config files from /etc/samba/smb.conf
rlimit_max: increasing rlimit_max (1024) to minimum Windows limit (16384)
WARNING: The "syslog" option is deprecated
Processing section "[homes]"
Processing section "[printers]"
Processing section "[print$]"
Processing section "[sambashare]"
Loaded services file OK.
Server role: ROLE_STANDALONE

Press enter to see a dump of your service definitions

# Global parameters
[global]
        log file = /var/log/samba/log.%m
        max log size = 1000
        syslog = 0
        panic action = /usr/share/samba/panic-action %d
        usershare allow guests = Yes
        map to guest = Bad User
        obey pam restrictions = Yes
        pam password change = Yes
        passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
        passwd program = /usr/bin/passwd %u
        server role = standalone server
        unix password sync = Yes
        dns proxy = No
        idmap config * : backend = tdb


[homes]
        comment = Home Directories
        browseable = No
        create mask = 0700
        directory mask = 0700
        valid users = %S


[printers]
        comment = All Printers
        path = /var/spool/samba
        browseable = No
        printable = Yes
        create mask = 0700


[print$]
        comment = Printer Drivers
        path = /var/lib/samba/printers


[sambashare]
        path = /root/sambashare
        read only = No
        valid users = root
</pre></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="index.html"><img src="images/prev.svg" alt="Prev"></a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="testing_share_definitions.html"><img src="images/next.svg" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;1.&nbsp;Network file systems served by Samba&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.svg" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;2.&nbsp;Testing share definitions using smbclient</td></tr></table></div></body></html>